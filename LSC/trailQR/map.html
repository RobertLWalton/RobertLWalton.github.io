<!DOCTYPE html>
<html>
<!--
File:	LSC/trailQR/map.html
Author:	Bob Walton ( walton@acm.org )
Date:	Tue Feb 21 03:54:49 EST 2023

Notes:

* Takes and argument of form ?AREA-LOCATION.  Loads
  'AREA.js' and expects that to define an object named
  AREA.  Redirects to AREA[LOCATION].

* Servers such as github override the <meta> stuff, making
  it inoperative so you must manually clear the cache
  when testing after an update.

-->

<head>

<meta http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />

</head>
<body>


<script>

let args = window.location.search.substr(1).split('-');
let area_name = args[0];
let location_name = args[1];

function area_loaded ()
{
    try {
	eval ( area_name );
    } catch(e) {
        alert ( 'bad ' + area_name + '.js file' );
	return;
    }
    let area = eval ( area_name );
    let url = area[location_name];
    if ( url == undefined )
    {
        alert ( 'bad location name ' + location_name +
	        ' in ' + area_name );
	return;
    }
    window.location.assign ( url );
}
let script = document.createElement('script');
script.src = area_name + '.js';
script.type = 'text/javascript';
script.async = false;
document.body.appendChild(script);
script.addEventListener('load', area_loaded );
script.addEventListener('error',
    () => { alert ( area_name + ' Not Found' ) });
</script>

</body>
</html>


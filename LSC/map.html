<!DOCTYPE html>
<html>
<!--
File:	LSC/map.html
Author:	Bob Walton ( walton@acm.org )
Date:	Mon Feb 20 07:01:43 EST 2023
-->

<head>

<meta http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />

<style>
pre.inline {
    display: inline-block;
    color: green;
}
</style>
</head>
<body>
<h1>Bob Walton's Acton Map Page</h1>

<script>

var x;
var y;
let zoom = '15.25';

if ( ! 'geolocation' in navigator )
{
    alert ( 'Geolocation NOT Available' );

    alert ( 'Redirecting To: https://trails.actonma.gov/map/' );
    window.location.assign ( 'https://trails.actonma.gov/map/' );
}

navigator.geolocation.getCurrentPosition
    ( storePosition, positionError );

function storePosition ( position )
{
    let x = position.coords.longitude;
    let y = position.coords.latitude;

    let src = 'https://trails.actonma.gov/map/'
	+ '?zoom=' + zoom
	+ '&lng=' + x
	+ '&lat=' + y
	+ '&m=[{%22t%22:%22You%20Are%20Here%22'
	+ ',%22x%22:%22' + x + '%22'
	+ ',%22y%22:%22' + y + '%22'
	+ '}]';

    alert ( 'Redirecting To: ' + src );
    window.location.assign ( src );
}

function positionError ()
{
    alert ( 'Position Not Available' );

    alert ( 'Redirecting To: https://trails.actonma.gov/map/' );
    window.location.assign ( 'https://trails.actonma.gov/map/' );
}

</script>
</body>
</html>

